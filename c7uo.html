<!DOCTYPE html>
<html lang="en">

<head>
    <title>Live Stream Player</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="referrer" content="no-referrer">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.6.12/dist/plyr.css">
    <style>
        body {
            background-color: #000;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        html, body {
            height: 100%;
        }
        video {
            width: 100%;
            height: 100%;
            max-width: 100%;
        }
        .plyr {
            height: 100%;
        }
    </style>
</head>

<body>
    <div class="plyr plyr--full-ui plyr--video plyr--html5 plyr--fullscreen-enabled plyr--is-touch">
        <div class="plyr__video-wrapper">
            <video id="player" autoplay muted crossorigin playsinline></video>
            <div class="plyr__poster"></div>
        </div>
        <div class="plyr__controls">
            <button class="plyr__controls__item plyr__control" type="button" data-plyr="play-large" aria-label="Play Large">
                <svg aria-hidden="true" focusable="false"><use xlink:href="#plyr-play"></use></svg>
                <span class="plyr__sr-only">Play Large</span>
            </button>
            <button class="plyr__controls__item plyr__control" type="button" data-plyr="play" aria-label="Play">
                <svg aria-hidden="true" focusable="false"><use xlink:href="#plyr-play"></use></svg>
                <span class="plyr__sr-only">Play</span>
            </button>
            <button class="plyr__controls__item plyr__control" type="button" data-plyr="pause" aria-label="Pause">
                <svg aria-hidden="true" focusable="false"><use xlink:href="#plyr-pause"></use></svg>
                <span class="plyr__sr-only">Pause</span>
            </button>
            <button class="plyr__controls__item plyr__control" type="button" data-plyr="mute" aria-label="Mute">
                <svg aria-hidden="true" focusable="false"><use xlink:href="#plyr-muted"></use></svg>
                <span class="plyr__sr-only">Mute</span>
            </button>
            <input data-plyr="volume" type="range" min="0" max="1" step="0.05" value="1" autocomplete="off" role="slider" aria-label="Volume" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100" style="--value: 100%;">
            <button class="plyr__controls__item plyr__control" type="button" data-plyr="settings" aria-label="Settings">
                <svg aria-hidden="true" focusable="false"><use xlink:href="#plyr-settings"></use></svg>
                <span class="plyr__sr-only">Settings</span>
            </button>
            <button class="plyr__controls__item plyr__control" type="button" data-plyr="fullscreen" aria-label="Fullscreen">
                <svg aria-hidden="true" focusable="false"><use xlink:href="#plyr-enter-fullscreen"></use></svg>
                <span class="plyr__sr-only">Fullscreen</span>
            </button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.1.4/dist/hls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/plyr@3.6.12/dist/plyr.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const video = document.getElementById('player');

            // Function to get query parameters
            function getQueryParam(param) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(param);
            }

            const source = getQueryParam('stream');
            if (!source) {
                document.body.innerHTML = '<p style="color:white; text-align:center; margin-top:20%;">No stream link provided!</p>';
                return;
            }

            // Initialize Plyr
            const player = new Plyr(video, {
                controls: ['play-large', 'play', 'pause', 'mute', 'volume', 'settings', 'fullscreen'],
            });

            // HLS.js setup
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(source);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => {
                    player.play(); // Start playing when the manifest is parsed
                });
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = source;
                player.play(); // Start playing for native HLS support
            } else {
                document.body.innerHTML = '<p>Your browser does not support HLS playback.</p>';
            }
        });

        window.addEventListener("load", function () {
            if (window.confirm("Join @cric match for more updates?")) {
                window.location.href = "Sports_live_linkss";
            }
        });
    </script>
</body>
</html>
